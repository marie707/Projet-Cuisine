window.adnext_rich2 = {w:1800, h:1000, i:'adv_ifr_2', c:'adv_callback = function() { document.write(\'<scr\'+\'ipt type="text/javascript" src="https://adnext.fr/richmedia.adv?id=101385&plc=2&section=recette&s=all&t=41167126&noexpand&uid=C4CED02C3768DCF39AC8B2A80BF24F2B&ts=2276135989&idb=-539937&idc=-159358&uid=C4CED02C3768DCF39AC8B2A80BF24F2B&ms=2276135989"></scr\'+\'ipt>\'); };\r\nadv_catch = function(e) {\r\n  function replaceErrors(k, v) {\r\n    if (v instanceof Error) {\r\n      var err = {};\r\n\r\n      Object.getOwnPropertyNames(v).forEach(function(i) {\r\n        err[i] = v[i];\r\n      });\r\n      return err;\r\n    }\r\n    return v;\r\n  }\r\n  (new Image).src = \'//www.adverline.com/adscript_log.cfm?id_ban=539937&id_campagne=159358&id_spub=101385&adscript=\' + encodeURIComponent(\'PREBID:\' + JSON.stringify(e, replaceErrors));\r\n};\r\n\r\n// IE < 10\r\nif (/msie|trident/i.test(navigator.userAgent) && parseInt(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i.exec(navigator.userAgent)[1], 10) < 10) {\r\n  adv_callback();\r\n} else {\r\n// IE < 10\r\n\r\n// SUPER TRY/CATCH\r\ntry {\r\n// SUPER TRY/CATCH\r\n\r\nwindow.hbParams = {\r\n  creative:         ["footer", "interstitial", "native"].indexOf("") !== -1 ? "" : "",\r\n  displayTrackers:  {\r\n                      adyoulike: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8017&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      appnexus: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8001&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      criteo: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8005&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      gravityapn: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8015&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      id: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8009&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      ix: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8006&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      justpremium: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8012&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      nanointeractive: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8011&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      openx: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8010&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      piximedia: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8016&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      quantumapn: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8013&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      rubicon: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8002&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      smart: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8007&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      teads: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8014&ms=" + Math.floor((new Date()).getTime() * Math.random())\r\n                    },\r\n  document:         "1800x1000@appnexusAst:11292609::rubicon:24069-390340::smartadserver:197791-878359-80589::improvedigital:1146932::justpremium:59181::openx:540328568",\r\n  floor:            parseFloat("0.150000"),\r\n  height:           parseInt("1000", 10),\r\n  idBan:            "539937",\r\n  idCampagne:       "159358",\r\n  idL:              "250612794.2709095355",\r\n  idS:              "101385",\r\n  query:            "id=101385&plc=2&section=recette&s=all&t=41167126&noexpand&uid=C4CED02C3768DCF39AC8B2A80BF24F2B&ts=2276135989",\r\n  referer:          (window.document.location && window.document.location.ancestorOrigins && window.document.location.ancestorOrigins.length >= 1) ? window.document.location.ancestorOrigins[window.document.location.ancestorOrigins.length - 1] : "https://www.atelierdeschefs.fr/fr/recette/6364-dos-de-cabillaud-roti-mousseline-de-potiron-et-ecume-de-gingembre.php",\r\n  refreshTrackers:  {\r\n                      adyoulike: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8517&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      appnexus: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8501&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      criteo: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8505&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      gravityapn: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8515&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      id: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8509&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      ix: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8506&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      justpremium: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8512&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      nanointeractive: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8511&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      openx: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8510&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      piximedia: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8516&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      quantumapn: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8513&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      rubicon: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8502&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      smart: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8507&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      teads: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=8514&ms=" + Math.floor((new Date()).getTime() * Math.random())\r\n                    },\r\n  serverName:       "adnext.fr",\r\n  sizes:            (function() {\r\n                      // Polyfill\r\n                      Number.isInteger = Number.isInteger || function(value) {\r\n                        return typeof value === "number"\r\n                          && isFinite(value)\r\n                          && Math.floor(value) === value;\r\n                      };\r\n                      \r\n                      var tree = [\r\n                        [\r\n                          { "width": 1800, "height": 1000, "floor": 6.3 }\r\n                        ],\r\n                        [\r\n                          { "width": 1000, "height":  300, "floor": 0.7 },\r\n                          { "width":  970, "height":  250, "floor": 0.7 },\r\n                          { "width": 1000, "height":   90, "floor": "" === "footer" ? 1.0 : 0.5 },\r\n                          { "width":  728, "height":   90, "floor": "" === "footer" ? 0.8 : 0.15 },\r\n                          { "width":  468, "height":   60, "floor": 0.15 }\r\n                        ],\r\n                        [\r\n                          { "width":  300, "height":  600, "floor": 0.5 },\r\n                          { "width":  300, "height":  250, "floor": 0.15 },\r\n                          { "width":  250, "height":  250, "floor": 0.15 }\r\n                        ],\r\n                        [\r\n                          { "width":  160, "height":  600, "floor": 0.15 },\r\n                          { "width":  120, "height":  600, "floor": 0.15 }\r\n                        ],\r\n                        [\r\n                          { "width":  320, "height":  100, "floor": 0.15 },\r\n                          { "width":  320, "height":   50, "floor": 0.15 },\r\n                          { "width":  300, "height":   50, "floor": 0.15 }\r\n                        ],\r\n                        [\r\n                          { "width":  320, "height":  480, "floor": 0.15 },\r\n                          { "width":  300, "height":  250, "floor": 0.15 }\r\n                        ]\r\n                      ], branch, leaf, rule = "1800x1000@appnexusAst:11292609::rubicon:24069-390340::smartadserver:197791-878359-80589::improvedigital:1146932::justpremium:59181::openx:540328568".split("@")[0], i, j, k, sizes = [], already = [];\r\n                      \r\n                      // Either we have an int or a wildcard\r\n                      if (Number.isInteger(Math.floor(Number(rule))) || rule === "*") {\r\n                        for (i = 0; i < tree.length; i++) {\r\n                          branch = tree[i];\r\n                          k = 0;\r\n    \r\n                          for (j = 0; j < branch.length; j++) {\r\n                            if (branch[j].width === parseInt("1800", 10) && branch[j].height === parseInt("1000", 10)) {\r\n                              leaf = j;\r\n                              k = rule;\r\n                            }\r\n    \r\n                            if (!!k && already.indexOf(branch[j].width + "x" + branch[j].height) === -1) {\r\n                              sizes.push(branch[j]);\r\n                              already.push(branch[j].width + "x" + branch[j].height);\r\n    \r\n                              if (k !== "*") {\r\n                                k--;\r\n                              }\r\n                            }\r\n                          }\r\n                        }\r\n                      // ... or a comma-separated list of sizes\r\n                      } else {\r\n                        for (i = 0; i < tree.length; i++) {\r\n                          branch = tree[i];\r\n                          \r\n                          for (j = 0; j < branch.length; j++) {\r\n                            if (rule.split(",").indexOf(branch[j].width + "x" + branch[j].height) !== -1 && already.indexOf(branch[j].width + "x" + branch[j].height) === -1) {\r\n                              sizes.push(branch[j]);\r\n                              already.push(branch[j].width + "x" + branch[j].height);\r\n                            }\r\n                          }\r\n                        }\r\n                      }\r\n\r\n                      return sizes;\r\n                    })(),\r\n  sections:         ["lang_fr","recette","geoip_fr_b7_79"],\r\n  tag:              "2",\r\n  timeoutTrackers:  {\r\n                      adyoulike: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9017&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      appnexus: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9001&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      criteo: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9005&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      gravityapn: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9015&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      id: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9009&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      ix: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9006&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      justpremium: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9012&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      nanointeractive: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9011&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      openx: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9010&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      piximedia: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9016&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      quantumapn: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9013&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      rubicon: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9002&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      smart: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9007&ms=" + Math.floor((new Date()).getTime() * Math.random()),\r\n                      teads: "//adnext.fr/track.adv?forceidl=250612794.2709095355&event=9014&ms=" + Math.floor((new Date()).getTime() * Math.random())\r\n                    },\r\n  ts:               "2276135989",\r\n  uid:              "C4CED02C3768DCF39AC8B2A80BF24F2B",\r\n  urlVisibility:    ["blind", "transparent"].indexOf("transparent") !== -1 ? "transparent" : "transparent",\r\n  width:            parseInt("1800", 10)\r\n};\r\n\r\n;(function() {\r\n  "use strict";\r\n\r\n  var ADV_DEBUG,\r\n    SAMPLING = false,\r\n    TIMEOUT = 1000;\r\n\r\n  ADV_DEBUG = /[?&#]adv_debug=1/.test(getTopWin().document.location.href);\r\n\r\n  if (!!ADV_DEBUG && typeof console !== "undefined" && typeof console.log !== "undefined") {\r\n    ADV_DEBUG = true;\r\n    \r\n    window.hbParams.sections.push("adv_debug");\r\n  }\r\n  \r\n  if (Math.random() < parseFloat(0.1) || !!ADV_DEBUG) {\r\n    SAMPLING = true;\r\n  }\r\n\r\n  if (typeof window.hbParams === "undefined") {\r\n    return;\r\n  }\r\n  \r\n  // Polyfill\r\n  if (typeof Object.assign !== "function") {\r\n    Object.assign = function (target, varArgs) {\r\n      if (target == null) {\r\n        throw new TypeError("Cannot convert undefined or null to object");\r\n      }\r\n  \r\n      var to = Object(target);\r\n  \r\n      for (var index = 1; index < arguments.length; index++) {\r\n        var nextSource = arguments[index];\r\n  \r\n        if (nextSource != null) {\r\n          for (var nextKey in nextSource) {\r\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n              to[nextKey] = nextSource[nextKey];\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return to;\r\n    };\r\n  }\r\n\r\n  // Polyfill\r\n  if (!Array.prototype.forEach) {\r\n    Array.prototype.forEach = function(callback, thisArg) {\r\n      var T, k;\r\n\r\n      if (this === null) {\r\n        throw new TypeError("this is null or not defined");\r\n      }\r\n\r\n      var O = Object(this);\r\n      var len = O.length >>> 0;\r\n\r\n      if (typeof callback !== "function") {\r\n        throw new TypeError(callback + " is not a function");\r\n      }\r\n\r\n      if (arguments.length > 1) {\r\n        T = thisArg;\r\n      }\r\n\r\n      k = 0;\r\n\r\n      while (k < len) {\r\n        var kValue;\r\n\r\n        if (k in O) {\r\n          kValue = O[k];\r\n          callback.call(T, kValue, k, O);\r\n        }\r\n\r\n        k++;\r\n      }\r\n    };\r\n  }\r\n\r\n  function callEvent(idl, tag, event) {\r\n    ADV_DEBUG && console.log("[ADV-HB][" + tag + "] Event: " + event);\r\n\r\n    (new Image).src = "//adnext.fr/track.adv?idl=" + idl + "&plc=" + tag + "&event=" + event + "&ms=" + Math.floor((new Date()).getTime() * Math.random());\r\n  }\r\n\r\n  function createIframe(context, callback) {\r\n    context = context || document;\r\n\r\n    var iframe = context.createElement("iframe");\r\n\r\n    iframe.setAttribute("allowtransparency", true);\r\n    iframe.setAttribute("frameborder", 0);\r\n    iframe.setAttribute("height", 0);\r\n    iframe.setAttribute("leftmargin", 0);\r\n    iframe.setAttribute("marginheight", 0);\r\n    iframe.setAttribute("marginwidth", 0);\r\n    // iframe.setAttribute("sandbox", "allow-top-navigation allow-same-origin allow-scripts");\r\n    // iframe.setAttribute("src", "about:blank");\r\n    iframe.setAttribute("scrolling", "no");\r\n    iframe.setAttribute("topmargin", 0);\r\n    iframe.setAttribute("width", 0);\r\n    iframe.style.border   = "0px";\r\n    iframe.style.margin   = "0px";\r\n    iframe.style.overflow = "hidden";\r\n    iframe.style.padding  = "0px";\r\n\r\n    if (typeof callback === "function") {\r\n      // because some browsers are dumb\r\n      var loaded = false;\r\n\r\n      iframe.onload = function() {\r\n        if (!loaded) {\r\n          // try {\r\n            callback.call(this);\r\n\r\n            loaded = true;\r\n            this.onload = null;\r\n          // } catch (e) { }\r\n        }\r\n      };\r\n    }\r\n\r\n    return iframe;\r\n  }\r\n\r\n  function overwriteSelf(content) {\r\n    // kill remaining prebid functions\r\n    window.pbjs.addBidResponse = window.pbjs.clearAuction = window.pbjs.executeCallback = window.pbjs.logError = window.pbjs.logging = function() {};\r\n  \r\n    var newId = window.frameElement.getAttribute("id"),\r\n      oldId = newId + "_old";\r\n\r\n    var newIframe = createIframe(window.parent.document);\r\n\r\n    window.frameElement.setAttribute("id", oldId);\r\n    newIframe.setAttribute("id", newId);\r\n    newIframe.setAttribute("width", window.frameElement.getAttribute("width") || 0);\r\n    newIframe.setAttribute("height", window.frameElement.getAttribute("height") || 0);\r\n\r\n    window.frameElement.parentNode.insertBefore(newIframe, window.frameElement);\r\n    \r\n    docWrite(getDoc(newIframe), [\r\n      \'<!DOCTYPE html><html><head></head><body marginwidth="0" marginheight="0">\',\r\n      content,\r\n      \'<script>typeof window.parent.ADVERLINE === "object" && typeof window.parent.ADVERLINE.reloadResize === "function" && window.parent.ADVERLINE.reloadResize(window.frameElement.getAttribute("id"));</scr\'+\'ipt></body></html>\'\r\n    ].join(""));\r\n    window.frameElement.parentNode.removeChild(window.frameElement);\r\n  }\r\n\r\n  function isBlacklisted(code) {\r\n    return (\r\n      false\r\n      || !!(/ayads\\.co/gi).exec(code)\r\n    );\r\n  }\r\n\r\n  function getDoc(el) {\r\n    return el.contentDocument || el.contentWindow.document;\r\n  }\r\n\r\n  function docWrite(doc, content) {\r\n    /*\r\n    function ready() {\r\n      try {\r\n        doc.removeEventListener("DOMContentLoaded", ready);\r\n        doc.defaultView.removeEventListener("load", ready);\r\n      } catch(e) {}\r\n\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] doc ready", doc.readyState);\r\n      \r\n      try {\r\n        doc.close();\r\n      } catch(e) {}\r\n\r\n      setTimeout(function() {\r\n        doc.open();\r\n        doc.write(content);\r\n        doc.close();\r\n      });\r\n    }\r\n    */\r\n\r\n    if (doc && content) {\r\n      // ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] doc readyState", doc.readyState);\r\n\r\n      try {\r\n        doc.open(\'text/html\', \'replace\');\r\n        doc.write(content);\r\n        doc.close();\r\n      } catch(e) {\r\n        setTimeout(function() {\r\n          doc.open(\'text/html\', \'replace\');\r\n          doc.write(content);\r\n          doc.close();\r\n        });\r\n      }\r\n\r\n      /*\r\n      switch (doc.readyState) {\r\n        case "loaded":\r\n        case "loading":\r\n        case "uninitialized":\r\n          doc.addEventListener("DOMContentLoaded", ready);\r\n          doc.defaultView.addEventListener("load", ready);\r\n          break;\r\n        case "complete":\r\n        case "interactive":\r\n          ready();\r\n          break;\r\n      }\r\n\r\n      setTimeout(ready);\r\n      */\r\n\r\n      /*\r\n      waitFor(function() {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] doc readyState", doc.readyState);\r\n        return doc.readyState === "complete";\r\n      }, function() {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] doc ready");\r\n        \r\n      }, 1000);\r\n      */\r\n    }\r\n  }\r\n  \r\n  function isSrcdocSupported(doc) {\r\n    return !!doc.defaultView && "srcdoc" in doc.defaultView.frameElement && !/firefox/i.test(navigator.userAgent);\r\n  }\r\n  \r\n  function waitFor(testFn, onReady, timeout) {\r\n    timeout = timeout || 2000;\r\n\r\n    var start = Date.now(),\r\n      condition = false,\r\n      interval = setInterval(function() {\r\n        if ((Date.now() - start < timeout) && !condition) {\r\n          condition = testFn();\r\n        } else {\r\n          if (condition) {\r\n            onReady();\r\n\r\n            clearInterval(interval);\r\n          }\r\n        }\r\n      }, 50);\r\n  }\r\n  \r\n  function advCallbackAsync() {\r\n    ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] advCallbackAsync");\r\n    bidsBack["ADV" + window.hbParams.tag] = true;\r\n    \r\n    overwriteSelf(\'<script src="//\' + window.hbParams.serverName + \'/richmedia.adv?\' + window.hbParams.query + \'&idc=-\' + window.hbParams.idCampagne + \'&idb=-\' + window.hbParams.idBan + \'"><\\/script>\');\r\n  }\r\n\r\n  function inIframe() {\r\n    var w = arguments[0] || window;\r\n\r\n    try {\r\n      return w.self !== w.top;\r\n    } catch (e) {\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  function inSafeFrame() {\r\n    var w = arguments[0] || window;\r\n    \r\n    return !!(w.$sf && w.$sf.ext);\r\n  }\r\n\r\n  function getParentWin() {\r\n    var w = arguments[0] || window;\r\n  \r\n    try {\r\n      // force an exception in x-domain environments.\r\n      w.parent.location.toString();\r\n  \r\n      return w.parent;\r\n    } catch (e) {\r\n      return w;\r\n    }\r\n  }\r\n  \r\n  function getTopWin() {\r\n    var w = arguments[0] || window;\r\n    \r\n    if (inIframe(w)) {\r\n      try {\r\n        // force an exception in x-domain environments.\r\n        w.top.location.toString();\r\n  \r\n        return w.top;\r\n      } catch (e) {\r\n        return getParentWin(w);\r\n      }\r\n    } else {\r\n      return w;\r\n    }\r\n  }\r\n  \r\n  function loadScript(doc, path, async, callback) {\r\n    var el = doc.createElement("script");\r\n    el.async = !!async;\r\n\r\n    if (callback && typeof callback === "function") {\r\n      if (el.readyState) {\r\n        el.onreadystatechange = function () {\r\n          if (el.readyState === "loaded" || el.readyState === "complete") {\r\n            el.onreadystatechange = null;\r\n            callback();\r\n          }\r\n        };\r\n      } else {\r\n        el.onload = function () {\r\n          callback();\r\n        };\r\n      }\r\n    }\r\n    \r\n    el.src = path;\r\n\r\n    var firstEl = doc.getElementsByTagName("script")[0];\r\n    firstEl.parentNode.insertBefore(el, firstEl);\r\n  }\r\n  \r\n  function postLog(log) {\r\n    try {\r\n      var xhr = new XMLHttpRequest();\r\n      xhr.open("POST", "https://www.adverline.com/adscript_log.cfm?id_ban=" + window.hbParams.idBan + "&id_campagne=" + window.hbParams.idCampagne + "&id_spub=" + window.hbParams.idS, true);\r\n      xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");\r\n      xhr.send("adscript=" + encodeURIComponent("PREBID:" + log));\r\n    } catch (e) {}\r\n  }\r\n\r\n  var bigQueryEvents = [];\r\n\r\n  function bigQueryLog(done) {\r\n    if (done && typeof done === "function") {\r\n      done();\r\n    }\r\n  }\r\n\r\n  function addEventHandler(element, event, func) {\r\n    if (element.addEventListener) {\r\n      element.addEventListener(event, func, true);\r\n    } else if (element.attachEvent) {\r\n      element.attachEvent("on" + event, func);\r\n    }\r\n  }\r\n  \r\n  function smartFloorFilterSize(formatId, sizeArray) {\r\n    var F = {\r\n      "80587": [[320,100], [320,50], [300,50]],\r\n      "80588": [[1000,300], [970,250], [1000,300], [970,250]],\r\n      "80589": [[1800,1000]],\r\n      "80590": [[320,480], [300,250]],\r\n      "80591": [[1000,90], [970,90]],\r\n      "80592": [[300,600]],\r\n      "80593": [[300,250], [250,250]],\r\n      "80594": [[160,600], [120,600]],\r\n      "80595": [[728,90], [468,60]]\r\n   };\r\n  \r\n    if (!(formatId in F)) {\r\n     return sizeArray;\r\n    }\r\n\r\n    return sizeArray.filter(function(i) {\r\n      for (var j = 0; j < F[formatId].length; j++) {\r\n        if (F[formatId][j][0] == i[0] && F[formatId][j][1] == i[1]) {\r\n          return true;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  var isPageVisible = true, isFIF = true;\r\n  \r\n  try {\r\n    // force an exception in x-domain environments. #1509\r\n    window.top.location.toString();\r\n\r\n    addEventHandler(window.top, "blur", function () {\r\n      isPageVisible = false;\r\n    });\r\n\r\n    addEventHandler(window.top, "focus", function () {\r\n      isPageVisible = true;\r\n    });\r\n\r\n    addEventHandler(window.top.document, "blur", function () {\r\n      isPageVisible = false;\r\n    });\r\n\r\n    addEventHandler(window.top, "visibilitychange", function () {\r\n      try {\r\n        isPageVisible = this.document.hasFocus();\r\n      } catch(e) {}\r\n    });\r\n  } catch(e) {\r\n    isFIF = false;\r\n  }\r\n\r\n  var bidsBack = [];\r\n  bidsBack["ADV" + window.hbParams.tag] = false;\r\n\r\n  window.pbjs = {};\r\n  window.pbjs.que = [];\r\n  \r\n  var isRivrTest = false;\r\n  \r\n  /*\r\n  if (["156135", "156136", "156137", "156138", "156139", "156140", "156141", "156142", "156143", "156144", "156145", "156146", "156976", "156977", "156978", "156979", " 172103", "172102", "172101", "172100", "172099", "172098", "172097", "172096"].indexOf(window.hbParams.idCampagne) !== -1) {\r\n    loadScript(document, "https://cdn-ocean.rivrai.com/rivraddon.js", 1, function() {\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] RIVR loaded");\r\n      \r\n      try {\r\n        window.RIVR_CLIENT_AUTH_TOKEN = "YWR2ZXJsaW5lOlBDWGljVmluSEhCU29id2E=";\r\n        window.RIVR_CLIENT_ID = "adverline";\r\n        window.RIVR_SITE_CATEGORIES = [];\r\n        window.RIVR_BANNER_IDS = ["postbid_iframe"];\r\n        \r\n        if (window.rivraddon) {\r\n          window.rivraddon.configGetter.getRivrConfiguration(window.RIVR_CLIENT_ID);\r\n\r\n          isRivrTest = true;\r\n        }\r\n      } catch(e) {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] RIVR exception", e);\r\n      }\r\n\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] RIVR test?", isRivrTest);\r\n    });\r\n  }\r\n  */\r\n  \r\n  var pubstackId = 0;\r\n  \r\n  switch (window.hbParams.idS) {\r\n    case "13025": pubstackId = "f6ef85af-cef0-424c-b96f-fdd6158ea0d7"; break;\r\n    case "14032": pubstackId = "08dde1c0-a062-4402-9a60-034a115d4181"; break;\r\n    case "15798": pubstackId = "82ea9778-f081-4ead-bb1b-a673d567c29f"; break;\r\n    case "18654": pubstackId = "2f1ee0b2-3874-4745-918b-5948b199c4cf"; break;\r\n    case "89443": pubstackId = "36afb4ef-f631-4922-9712-738b0c81f013"; break;\r\n    case "91478": pubstackId = "02b08810-5eb6-4122-8251-449a8e152576"; break;\r\n    case "91479": pubstackId = "02b08810-5eb6-4122-8251-449a8e152576"; break;\r\n    case "96149": pubstackId = "2198bcf2-fecd-4743-ad0d-d7c4f20966e5"; break;\r\n    case "96491": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96497": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96498": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96499": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96500": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96501": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96502": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96503": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96504": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96505": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96508": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96513": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96595": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96612": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96618": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96654": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96666": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96667": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96668": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96703": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96877": pubstackId = "0c88e020-ad57-4104-8e6a-a0d83ed6f3ff"; break;\r\n    case "96928": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96929": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96930": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96932": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96933": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96934": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96935": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96936": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96938": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96939": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96941": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96942": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96943": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96945": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96946": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96955": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96956": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "96957": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97196": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97197": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97347": pubstackId = "66ac2e26-fa67-4e20-b38b-f4fe529b4030"; break;\r\n    case "97415": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97420": pubstackId = "0356f9d0-ddd2-4e6c-baf5-ced1bc31233a"; break;\r\n    case "97499": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97500": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97501": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97503": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97587": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "97590": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "97591": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "97595": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "97598": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97599": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97609": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "97655": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97656": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97659": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97660": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97667": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97668": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97697": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97698": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97699": pubstackId = "8d260e38-e2cb-43a8-b1b0-0c2e7aa3d7a4"; break;\r\n    case "97721": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97722": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97729": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97885": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97886": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97888": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97889": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97890": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97891": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "97965": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "98050": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98051": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98052": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98053": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98108": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "98109": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "98113": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98167": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98169": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98185": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98218": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98309": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98332": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "98425": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98463": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98554": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98571": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98581": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98617": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98671": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98712": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "98739": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99093": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99100": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99105": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99106": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99220": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "99227": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99228": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99229": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99296": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99324": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99342": pubstackId = "2b521c02-4858-4a2f-b140-b8496c1406f7"; break;\r\n    case "99413": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99415": pubstackId = "36afb4ef-f631-4922-9712-738b0c81f013"; break;\r\n    case "99501": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99550": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99553": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99796": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "99797": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "100194": pubstackId = "36afb4ef-f631-4922-9712-738b0c81f013"; break;\r\n    case "100212": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "100235": pubstackId = "2b521c02-4858-4a2f-b140-b8496c1406f7"; break;\r\n    case "100265": pubstackId = "be85703b-b50d-4f5d-bb3d-19aeaf777635"; break;\r\n    case "100505": pubstackId = "2cd51412-b9b6-42d6-b04c-71109dbb72d0"; break;\r\n    case "100809": pubstackId = "36afb4ef-f631-4922-9712-738b0c81f013"; break;\r\n    case "100854": pubstackId = "3d66a10f-1405-419a-ad15-0fc6e7c8bec2"; break;\r\n    case "100858": pubstackId = "8489bc08-c2b5-4063-a772-ae20168e8f76"; break;\r\n    case "101252": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "101385": pubstackId = "0f5ef340-c6a7-4661-b5b8-5234cf46d11c"; break;\r\n    case "101432": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "101517": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "101698": pubstackId = "de5468ad-ef05-478a-91a6-03b18e615ff9"; break;\r\n    case "101966": pubstackId = "f2d536c3-bd41-4085-be7f-9df141698bb8"; break;\r\n    case "102120": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "102399": pubstackId = "22028172-09a1-406e-940a-c4c8355fb988"; break;\r\n    case "102459": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "102482": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "102695": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "102802": pubstackId = "f49eb8bf-3c68-4a43-a4aa-bd64520cbb0e"; break;\r\n    case "102841": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "102886": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "102887": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "102888": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "102889": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "102896": pubstackId = "0c88e020-ad57-4104-8e6a-a0d83ed6f3ff"; break;\r\n    case "102965": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "102966": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "103090": pubstackId = "07890240-2428-4bb7-8e1a-231ed43fa6a2"; break;\r\n    case "103091": pubstackId = "07890240-2428-4bb7-8e1a-231ed43fa6a2"; break;\r\n    case "103111": pubstackId = "d962fe1d-4d9a-47b8-85a3-823a201cfda2"; break;\r\n    case "103125": pubstackId = "0f03cc10-9ba7-4e5b-a936-4b71bdcf87e0"; break;\r\n    case "103195": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "103200": pubstackId = "f80d7743-46a0-4ac3-af32-fb1376109929"; break;\r\n    case "103261": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "103438": pubstackId = "4f5edfe4-b2e9-4591-ac77-99f343670c8c"; break;\r\n    case "103547": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "103643": pubstackId = "31465a6f-326d-4515-bc4f-b6844c32f9cb"; break;\r\n    case "103688": pubstackId = "31465a6f-326d-4515-bc4f-b6844c32f9cb"; break;\r\n    case "103718": pubstackId = "0f03cc10-9ba7-4e5b-a936-4b71bdcf87e0"; break;\r\n    case "103777": pubstackId = "f164a8df-6df4-4f97-b89b-b415db5d52bd"; break;\r\n    case "103782": pubstackId = "36afb4ef-f631-4922-9712-738b0c81f013"; break;\r\n    case "103837": pubstackId = "0f03cc10-9ba7-4e5b-a936-4b71bdcf87e0"; break;\r\n    case "103849": pubstackId = "0f03cc10-9ba7-4e5b-a936-4b71bdcf87e0"; break;\r\n    case "103874": pubstackId = "fc4a248f-8291-4924-8471-af61b603e3bf"; break;\r\n    case "103900": pubstackId = "2bb630b2-0c57-4708-be65-190b30db9055"; break;\r\n    case "103904": pubstackId = "0f5ef340-c6a7-4661-b5b8-5234cf46d11c"; break;\r\n    case "103947": pubstackId = "0f03cc10-9ba7-4e5b-a936-4b71bdcf87e0"; break;\r\n    case "104017": pubstackId = "86d29088-22a4-48dc-a097-d57a05174274"; break;\r\n    case "104045": pubstackId = "f7e76c13-45a7-449a-befd-d1cc37aaebbf"; break;\r\n    case "104060": pubstackId = "86d29088-22a4-48dc-a097-d57a05174274"; break;\r\n    case "104172": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "104289": pubstackId = "48f7d684-f3c0-474f-9461-9750a3dc96fc"; break;\r\n    case "104449": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "104450": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "104451": pubstackId = "ba38da1b-64ce-46ef-a1cf-2c2830d4d72f"; break;\r\n    case "104461": pubstackId = "0f03cc10-9ba7-4e5b-a936-4b71bdcf87e0"; break;\r\n    case "104498": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "104634": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104660": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "104662": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "104688": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104695": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104696": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104697": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104711": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104712": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104713": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104717": pubstackId = "66ac2e26-fa67-4e20-b38b-f4fe529b4030"; break;\r\n    case "104737": pubstackId = "02b08810-5eb6-4122-8251-449a8e152576"; break;\r\n    case "104738": pubstackId = "02b08810-5eb6-4122-8251-449a8e152576"; break;\r\n    case "104739": pubstackId = "02b08810-5eb6-4122-8251-449a8e152576"; break;\r\n    case "104740": pubstackId = "02b08810-5eb6-4122-8251-449a8e152576"; break;\r\n    case "104741": pubstackId = "02b08810-5eb6-4122-8251-449a8e152576"; break;\r\n    case "104761": pubstackId = "2bb630b2-0c57-4708-be65-190b30db9055"; break;\r\n    case "104779": pubstackId = "25d3d732-f8e9-44bd-981b-7b70e7c4401d"; break;\r\n    case "104780": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "104781": pubstackId = "6bebcc76-53a3-4261-8fc3-712f31b5de72"; break;\r\n    case "104783": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104784": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104789": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104793": pubstackId = "0f03cc10-9ba7-4e5b-a936-4b71bdcf87e0"; break;\r\n    case "104818": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n    case "104855": pubstackId = "8df6c4d8-0e4b-450c-9575-8010b7eb171e"; break;\r\n    case "104856": pubstackId = "8df6c4d8-0e4b-450c-9575-8010b7eb171e"; break;\r\n    case "104912": pubstackId = "8df6c4d8-0e4b-450c-9575-8010b7eb171e"; break;\r\n    case "104943": pubstackId = "48f7d684-f3c0-474f-9461-9750a3dc96fc"; break;\r\n    case "104969": pubstackId = "0f03cc10-9ba7-4e5b-a936-4b71bdcf87e0"; break;\r\n    case "104980": pubstackId = "fc23c033-2ea7-4848-8adf-598ff794906a"; break;\r\n    case "104987": pubstackId = "0e200f60-f208-4d19-b8a1-86a6b0c6b210"; break;\r\n    case "104997": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "104999": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "105002": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "105004": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "105006": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "105007": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "105008": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "105010": pubstackId = "39221d3f-c8c9-499b-9f8f-7d2ab7b1748a"; break;\r\n    case "105132": pubstackId = "beb6c7db-9aa3-46ec-a8fe-53c42d9c44bb"; break;\r\n    case "105133": pubstackId = "026573b0-24dd-46c9-b780-1f480181366b"; break;\r\n    case "105250": pubstackId = "6a0bd0a6-ee9b-4c53-823f-a7ab350181d2"; break;\r\n    case "105251": pubstackId = "6a0bd0a6-ee9b-4c53-823f-a7ab350181d2"; break;\r\n    case "105296": pubstackId = "3d66a10f-1405-419a-ad15-0fc6e7c8bec2"; break;\r\n    case "105387": pubstackId = "2c6c7c32-60f5-4264-aa21-0f867c1636c5"; break;\r\n    case "105408": pubstackId = "3eeb470f-cfb7-4ea5-9175-faa9e31ac15f"; break;\r\n    case "105525": pubstackId = "41609b64-dcd3-4c82-9974-d2f007e8e6cb"; break;\r\n  }\r\n\r\n  if (pubstackId/* && (new Date).getTime() % 3 !== 0*/) {\r\n    loadScript(document, "https://boot.pubstack.io/v1/tag/" + pubstackId, 1);\r\n  }\r\n\r\n  loadScript(document, "//cdn.adnext.fr/vendor/prebid.js/prebid-2.29.0.min.js", 1);\r\n\r\n  ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Document: " + window.hbParams.document);\r\n  \r\n  if (window.hbParams.idS == 89443 || window.hbParams.idS == 100194) {\r\n    (new Image).src = "//adnext.fr/track.adv?idl=" + window.hbParams.idL + "&event=1002&ms=" + Math.floor((new Date()).getTime() * Math.random());\r\n  }\r\n\r\n  var bidders = window.hbParams.document.split("@")[1].split("::"),\r\n    sizes = [], \r\n    floorRules = {},\r\n    country = "",\r\n    isInternational = false,\r\n    isMobile = false,\r\n    data = { inventory: {}, visitor: {} };\r\n\r\n  // International (not FR, BE or CH) and mobile detection\r\n  window.hbParams.sections.forEach(function(section) {\r\n    if (/^geoip_([a-z]+)_/.test(section)) {\r\n      country = section.match(/^geoip_([a-z]+)_/)[1];\r\n    } else if (/^mobileplateform/.test(section)) {\r\n      isMobile = true;\r\n    }\r\n  });\r\n  \r\n  isInternational = (["be", "ch", "fr"].indexOf(country) === -1);\r\n\r\n  window.hbParams.absoluteFloor = 0;\r\n\r\n  window.hbParams.sizes.forEach(function(size) {\r\n    if (isMobile && size.width === 1800 && size.height === 1000) {\r\n      return;\r\n    }\r\n    \r\n    sizes.push([ size.width, size.height ]);\r\n    floorRules[size.width + "x" + size.height] = size.floor || window.hbParams.floor;\r\n    \r\n    window.hbParams.absoluteFloor = !!window.hbParams.absoluteFloor ? Math.min(window.hbParams.absoluteFloor, floorRules[size.width + "x" + size.height]) : floorRules[size.width + "x" + size.height];\r\n  });\r\n  \r\n  window.hbParams.absoluteFloor = Math.max(window.hbParams.absoluteFloor, window.hbParams.floor);\r\n  \r\n  ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Absolute Floor", window.hbParams.absoluteFloor);\r\n  \r\n  if (sizes.length === 0) {\r\n    ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Callback");\r\n\r\n    return advCallbackAsync();\r\n  }\r\n  \r\n  // TODO: improve and remove macros\r\n  if (false || false || false || false\r\n  || false || false || false || false\r\n  || false || false || false)\r\n    data.visitor.genre = "homme";\r\n\r\n  if (false || false || false || false\r\n  || false || false || false || false\r\n  || false || false || false)\r\n    data.visitor.genre = "femme";\r\n    \r\n  if (false || false || false) data.visitor.age = "13-17";\r\n  if (false || false || false) data.visitor.age = "18-20";\r\n  if (false || false || false) data.visitor.age = "21-24";\r\n  if (false || false || false) data.visitor.age = "25-29";\r\n  if (false || false || false) data.visitor.age = "30-34";\r\n  if (false || false || false) data.visitor.age = "35-44";\r\n  if (false || false || false) data.visitor.age = "45-49";\r\n  if (false || false || false) data.visitor.age = "50-54";\r\n  if (false || false || false) data.visitor.age = "55-64";\r\n  if (false || false || false) data.visitor.age = "65plus";\r\n    \r\n  data.inventory.sections = window.hbParams.sections.join(",");\r\n  data.inventory.roadblocks = null || "";\r\n  \r\n  if ("0" == "1") {\r\n    data.visitor.segment75017 = "true";\r\n  }\r\n  \r\n  ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] data", JSON.stringify(data));\r\n\r\n  var adFrame = createIframe();\r\n\r\n  adFrame.setAttribute("id", "postbid_iframe");\r\n  adFrame.setAttribute("class", "adv_test_2");\r\n  \r\n  var emptyBid = { adId: "", bidderCode: null, cpm: 0, dealId: null },\r\n    bestBid = emptyBid,\r\n    secondBestBid = emptyBid;\r\n\r\n  var canRefresh = (window.hbParams.creative !== "footer" && window.hbParams.creative !== "interstitial"),\r\n    refreshCount = 0,\r\n    refreshTimeout = 35000;\r\n  \r\n  function renderAd() {\r\n    getTopWin().postMessage({ type: "adverline-headerbidding", event: "win", plc: window.hbParams.tag, bidderCode: bestBid.bidderCode, cpm: bestBid.cpm, dealId: bestBid.dealId ? bestBid.dealId : null, creativeId: bestBid.creativeId ? bestBid.creativeId : (bestBid.creative_id ? bestBid.creative_id : null) }, "*");\r\n\r\n    if (refreshCount === 0) {\r\n      if (typeof window.hbParams.displayTrackers !== "undefined" && typeof window.hbParams.displayTrackers[bestBid.bidderCode] !== "undefined") {\r\n        (new Image).src = window.hbParams.displayTrackers[bestBid.bidderCode];\r\n      }\r\n    } else {\r\n      if (typeof window.hbParams.refreshTrackers !== "undefined" && typeof window.hbParams.refreshTrackers[bestBid.bidderCode] !== "undefined") {\r\n        (new Image).src = window.hbParams.refreshTrackers[bestBid.bidderCode];\r\n      }\r\n    }\r\n    \r\n    canRefresh = canRefresh && (bestBid.bidderCode !== "justpremium");\r\n\r\n    if (!!adFrame) {\r\n      switch (window.hbParams.creative) {\r\n        case "footer":\r\n\r\n          ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] ADVFooter.js");\r\n          \r\n          loadScript(getTopWin().document, "//ads.adverline.com/richmedias/ADVFooter.js", 1, function() {\r\n            getTopWin().ADVFooter.renderAd({\r\n              ad:     !!bestBid.ad ? bestBid.ad : "",\r\n              adUrl:  !!bestBid.adUrl ? bestBid.adUrl : "",\r\n              height: bestBid.height,\r\n              width:  bestBid.width\r\n            });\r\n          });\r\n          \r\n          return;\r\n\r\n          break;\r\n        case "interstitial":\r\n\r\n          ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] ADVInterstitial.js");\r\n          \r\n          loadScript(getTopWin().document, "//ads.adverline.com/richmedias/ADVInterstitial.js", 1, function() {\r\n            getTopWin().ADVInterstitial.renderAd({\r\n              ad:     !!bestBid.ad ? bestBid.ad : "",\r\n              adUrl:  !!bestBid.adUrl ? bestBid.adUrl : "",\r\n              height: bestBid.height,\r\n              width:  bestBid.width\r\n            });\r\n          });\r\n          \r\n          return;\r\n\r\n          break;\r\n        default:\r\n\r\n          if (["567020", "567016", "567014", "567012"].indexOf(bestBid.dealId) === -1 && bestBid.bidderCode != "justpremium" && bestBid.width == 1800 && bestBid.height == 1000) {\r\n            ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] skindirect.js");\r\n            \r\n            window.adv_sk_html   = !!bestBid.ad ? bestBid.ad : "";\r\n            window.adv_sk_url    = !!bestBid.adUrl ? bestBid.adUrl : "";\r\n            window.adv2276135989  = window.hbParams.ts;\r\n            window.habillage     = 1;\r\n            window.idc           = window.hbParams.idCampagne;\r\n            window.idl           = window.hbParams.idL;\r\n            window.plc           = window.hbParams.tag;\r\n            window.servername    = window.hbParams.serverName;\r\n            window.spub          = window.hbParams.idS;\r\n            window.top.habillage = 1;\r\n            window.top.habillage_waitfromrtb = 1;\r\n\r\n            loadScript(document, "//cdn.adnext.fr/skin/skindirect.js", 1);\r\n\r\n            return;\r\n          } else {\r\n            document.body.appendChild(adFrame);\r\n          }\r\n\r\n          break;\r\n      }\r\n\r\n      adFrame.setAttribute("width", bestBid.width);\r\n      adFrame.style.width = bestBid.width + "px";\r\n      adFrame.setAttribute("height", bestBid.height);\r\n      adFrame.style.height = bestBid.height + "px";\r\n\r\n      if (!!bestBid.ad) {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] iFrame content");\r\n        \r\n        docWrite(getDoc(adFrame), bestBid.ad);\r\n      } else {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] iFrame URL");\r\n\r\n        adFrame.setAttribute("src", bestBid.adUrl);\r\n      }\r\n\r\n      typeof window.parent.ADVERLINE === "object" && typeof window.parent.ADVERLINE.setIframeSize === "function" && window.parent.ADVERLINE.setIframeSize(window.frameElement.getAttribute("id"), !!window.hbParams.creative ? 1 : bestBid.width, !!window.hbParams.creative ? 1 : bestBid.height);\r\n    } else {\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Callback (no frame)");\r\n\r\n      return advCallbackAsync();\r\n    }\r\n\r\n    if (!!canRefresh) {\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Refresh enabled");\r\n\r\n      window.setTimeout(function() {\r\n        if (!!isPageVisible || window.hbParams.urlVisibility === \'blind\') {\r\n          var isAdVisible = false;\r\n          \r\n          if (!!isFIF) {\r\n            try {\r\n              if (window.getComputedStyle(window.frameElement).display !== \'none\' && window.getComputedStyle(window.frameElement).visibility !== \'hidden\') {\r\n                var acceptableViewablePercentage = 50;\r\n                var adArea = bestBid.width * bestBid.height;\r\n                \r\n                if (adArea >= 242500) {\r\n                  acceptableViewablePercentage = 50;\r\n                }\r\n\r\n                var adFrameRect = window.frameElement.getBoundingClientRect();\r\n\r\n                if (adFrameRect.width >= bestBid.width && adFrameRect.height >= bestBid.height) {\r\n                  var rootRect = {\r\n                    top: 0,\r\n                    right: window.top.document.documentElement.clientWidth || window.top.document.body.clientWidth,\r\n                    bottom: window.top.document.documentElement.clientHeight || window.top.document.body.clientHeight,\r\n                    left: 0,\r\n                    width: window.top.document.documentElement.clientWidth || window.top.document.body.clientWidth,\r\n                    height: window.top.document.documentElement.clientHeight || window.top.document.body.clientHeight\r\n                  };\r\n\r\n                  var intersectRect = {\r\n                    top: Math.max(adFrameRect.top, rootRect.top),\r\n                    right: Math.min(adFrameRect.right, rootRect.right),\r\n                    bottom: Math.min(adFrameRect.bottom, rootRect.bottom),\r\n                    left: Math.max(adFrameRect.left, rootRect.left),\r\n                    width: 0,\r\n                    height: 0\r\n                  };\r\n\r\n                  intersectRect.width = intersectRect.right - intersectRect.left;\r\n                  intersectRect.height = intersectRect.bottom - intersectRect.top;\r\n\r\n                  if ((intersectRect.width * intersectRect.height) / (adFrameRect.width * adFrameRect.height) >= acceptableViewablePercentage / 100) {\r\n                    ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Ad visible");\r\n\r\n                    isAdVisible = true;\r\n                  }\r\n                }\r\n              }\r\n            } catch(e) {}\r\n          }\r\n          \r\n          if (!!isAdVisible || window.hbParams.urlVisibility === \'blind\') {\r\n            bidsBack["ADV" + window.hbParams.tag] = false;\r\n            \r\n            window.pbjs.adUnits[0].sizes = [[bestBid.width, bestBid.height]];\r\n\r\n            window.pbjs.requestBids({\r\n              bidsBackHandler: bidsBackHandler\r\n            });\r\n\r\n            refreshCount++;\r\n\r\n            ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Refresh", refreshCount);\r\n            \r\n            return;\r\n          }\r\n        }\r\n\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Refresh disabled");\r\n      }, refreshTimeout);\r\n    }\r\n  }\r\n  \r\n  function bidsBackHandler(bids) {\r\n    ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Bids Back Handler", bids);\r\n\r\n    if (secondBestBid.cpm > 0) {\r\n      bids["ADV" + window.hbParams.tag].bids.push(secondBestBid);\r\n\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Bids Back Handler (with last 2nd best)", bids);\r\n\r\n      secondBestBid = emptyBid;\r\n    }\r\n\r\n    // fix: ie\r\n    if (!bidsBack["ADV" + window.hbParams.tag]) {\r\n      bidsBack["ADV" + window.hbParams.tag] = true;\r\n    } else {\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Already called");\r\n      \r\n      return;\r\n    }\r\n    \r\n    bestBid = emptyBid;\r\n\r\n    try {\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Publisher floor:", window.hbParams.floor);\r\n      \r\n      sizes.forEach(function(s) {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Format floor", s[0] + "x" + s[1], floorRules[s[0] + "x" + s[1]]);\r\n      });\r\n    } catch (e) {}\r\n\r\n    if (typeof bids["ADV" + window.hbParams.tag] !== "undefined" && bids["ADV" + window.hbParams.tag].bids.length > 0) {\r\n      bids["ADV" + window.hbParams.tag].bids.forEach(function(bid) {\r\n        var isForced = bid.dealId\r\n          && (\r\n            (bid.bidderCode === "appnexus" && ["603276","603278","603280","603281","603287","603288","603349","603350","603351","603363","603359","603362","603436","603437","603438","603439","603448","603449"].indexOf(bid.dealId.toString()) !== -1)\r\n            || (bid.bidderCode === "rubicon" && ["592690","592712","592716","592722","592728","592732","592746","592750","592754","592742","592760","592762","592860","592862","592864","592866","592874","592876","592890","592894","592898","592902","592916","592918","592946","592948","592950","592952","592962","592964","592974","592978","592980","592982","592988","592990",].indexOf(bid.dealId.toString()) !== -1)\r\n          );\r\n\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Evaluating:", bid.bidderCode, bid.cpm, bid.dealId, isForced);\r\n\r\n        if (\r\n          bid.cpm >= parseFloat(window.hbParams.floor)\r\n          && (\r\n            (!!bid.ad && !isBlacklisted(bid.ad))\r\n            || (!!bid.adUrl && !isBlacklisted(bid.adUrl))\r\n          )\r\n          && (\r\n            !(\r\n              !(bid.dealId || bid.bidderCode == "justpremium")\r\n              && !(\r\n               typeof floorRules[bid.width + "x" + bid.height] === "undefined"\r\n                || (\r\n                  typeof floorRules[bid.width + "x" + bid.height] !== "undefined"\r\n                  && bid.cpm >= floorRules[bid.width + "x" + bid.height]\r\n                )\r\n              )\r\n            )\r\n          )\r\n        ) {\r\n          if (bid.cpm > bestBid.cpm || isForced) {\r\n            if (bestBid.bidderCode !== "ix") {\r\n              secondBestBid = bestBid;\r\n            }\r\n\r\n            bestBid = bid;\r\n          }\r\n\r\n          if (bid.bidderCode !== "ix" && bestBid.adId !== bid.adId && bid.cpm > secondBestBid.cpm && !isForced) {\r\n            secondBestBid = bid;\r\n          }\r\n\r\n          ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Best:", bestBid.bidderCode, bestBid.cpm, bestBid.dealId);\r\n          ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Second Best:", secondBestBid.bidderCode, secondBestBid.cpm, secondBestBid.dealId);\r\n        } else {\r\n          ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Excluded:", bid.bidderCode, bid.cpm, bid.dealId);\r\n        }\r\n      });\r\n\r\n      if (bestBid.cpm > 0) {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Winner:", bestBid.bidderCode, bestBid.cpm, bestBid.dealId);\r\n        \r\n        if (secondBestBid.width !== bestBid.width && secondBestBid.height !== bestBid.height) {\r\n          secondBestBid = emptyBid;\r\n        }\r\n\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Second:", secondBestBid.bidderCode, secondBestBid.cpm, secondBestBid.dealId);\r\n\r\n        bestBid.renderer = {\r\n          url: true,\r\n          render: function() {\r\n            renderAd();\r\n          }\r\n        };\r\n\r\n        window.pbjs.renderAd(window.document, bestBid.adId);\r\n\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (refreshCount === 0) {\r\n      bigQueryLog(function() {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] Callback");\r\n\r\n        return advCallbackAsync();\r\n      });\r\n    }\r\n  }\r\n  \r\n  window.pbjs.que.push(function() {\r\n    window.pbjs.setConfig({\r\n      consentManagement: {\r\n        allowAuctionWithoutConsent: true,\r\n        cmpApi: "iab",\r\n        timeout: 1500\r\n      },\r\n      currency: {\r\n        adServerCurrency: "EUR",\r\n        rates: { "USD": { "EUR": parseFloat("0.90449") === parseFloat("0.90449") ? parseFloat("0.90449") : 1 }}\r\n      },\r\n      bidderTimeout: TIMEOUT,\r\n      debug: ADV_DEBUG,\r\n      disableAjaxTimeout: false,\r\n      enableSendAllBids: true,\r\n      improvedigital: {\r\n        singleRequest: true\r\n      },\r\n      maxRequestsPerOrigin: 6,\r\n      rubicon: {\r\n        singleRequest: true\r\n      },\r\n      timeoutBuffer: 200,\r\n      useBidCache: true,\r\n      userSync: {\r\n        filterSettings: {\r\n          all: {\r\n            bidders: "*",\r\n            filter: "include"\r\n          }\r\n        },\r\n        syncDelay: 100\r\n      }\r\n    });\r\n    \r\n    window.pbjs.aliasBidder("appnexus", "gravityapn");\r\n    window.pbjs.aliasBidder("appnexus", "quantumapn");\r\n  });\r\n  \r\n  var adUnits = [];\r\n\r\n  window.pbjs.que.push(function() {\r\n    adUnits = [\r\n      {\r\n        bids:  [],\r\n        code:  "ADV" + window.hbParams.tag,\r\n        mediaTypes: {\r\n          banner: {\r\n            sizes: sizes\r\n          }\r\n        }\r\n      }\r\n    ];\r\n\r\n    bidders.forEach(function(bidder) {\r\n      var bidderName, placementIds;\r\n\r\n      if (bidder !== "HB") {\r\n        bidderName = bidder.split(":")[0];\r\n\r\n        switch (bidderName) {\r\n          case "adyoulike":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              adUnits[0].bids.push({\r\n                bidder: bidderName,\r\n                params: {\r\n                  placement: placementId\r\n                }\r\n              });\r\n            });\r\n            break;\r\n          case "appnexus":\r\n          case "appnexusAst":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              var kw = { "laposte_age": data.visitor.age, "laposte_genre": data.visitor.genre };\r\n              \r\n              if (!!ADV_DEBUG) {\r\n                kw["adv_debug"] = 1;\r\n              }\r\n              \r\n              adUnits[0].bids.push({\r\n                bidder: "appnexus",\r\n                params: {\r\n                  keywords:    kw,\r\n                  placementId: placementId\r\n                }\r\n              });\r\n            });\r\n            break;\r\n          case "criteo":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              adUnits[0].bids.push({\r\n                bidder: bidderName,\r\n                params: {\r\n                  zoneId: placementId\r\n                }\r\n              });\r\n            });\r\n            break;\r\n          case "gravityapn":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              adUnits[0].bids.push({\r\n                bidder: bidderName,\r\n                params: {\r\n                  placementId: placementId\r\n                }\r\n              });\r\n            });\r\n            break;\r\n          case "id":\r\n          case "improvedigital":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              // sizes.forEach(function(size) {\r\n                adUnits[0].bids.push({\r\n                  bidder: "id",\r\n                  params: {\r\n                    placementId: placementId,\r\n                    segment: !!getParentWin().ngg_content ? getParentWin().ngg_content.split(",") : []/* ,\r\n                    size: {\r\n                      w: size[0],\r\n                      h: size[1]\r\n                    } */\r\n                  }\r\n                });\r\n              // });\r\n            });\r\n            break;\r\n          case "indexExchange":\r\n          case "ix":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              sizes.forEach(function(size) {\r\n                adUnits[0].bids.push({\r\n                  bidder: "ix",\r\n                  params: {\r\n                    siteId: placementId.split("-")[1],\r\n                    size: size\r\n                  }\r\n                });\r\n              });\r\n            });\r\n            break;\r\n          case "justpremium":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              sizes.forEach(function(size) {\r\n                adUnits[0].bids.push({\r\n                  bidder: bidderName,\r\n                  params: {\r\n                    zone: placementId\r\n                  }\r\n                });\r\n              });\r\n            });\r\n            break;\r\n          case "nanointeractive":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              sizes.forEach(function(size) {\r\n                adUnits[0].bids.push({\r\n                  bidder: bidderName,\r\n                  params: {\r\n                    pid: placementId.split("-")[0],\r\n                    name: placementId.split("-")[1]\r\n                  }\r\n                });\r\n              });\r\n            });\r\n            break;\r\n          case "quantumapn":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              adUnits[0].bids.push({\r\n                bidder: bidderName,\r\n                params: {\r\n                  placementId: placementId\r\n                }\r\n              });\r\n            });\r\n            break;\r\n          case "openx":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              adUnits[0].bids.push({\r\n                bidder: bidderName,\r\n                params: {\r\n                  delDomain: "adverline-d.openx.net",\r\n                  unit: placementId\r\n                }\r\n              });\r\n            });\r\n            break;\r\n          case "piximedia":\r\n              placementIds = bidder.split(":")[1].split(",");\r\n  \r\n              placementIds.forEach(function(placementId) {\r\n                adUnits[0].bids.push({\r\n                  bidder: bidderName,\r\n                  params: {\r\n                    placementId: placementId.split("-")[1],\r\n                    siteId: placementId.split("-")[0]\r\n                  }\r\n                });\r\n              });\r\n          case "rubicon":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              adUnits[0].bids.push({\r\n                bidder: bidderName,\r\n                params: {\r\n                  accountId: 10677,\r\n                  inventory: data.inventory,\r\n                  siteId:    placementId.split("-")[0],\r\n                  visitor:   data.visitor,\r\n                  zoneId:    placementId.split("-")[1],\r\n                  referrer:  window.hbParams.referer.replace(/^(https?:\\/\\/)?(www\\.)?([^/:]+)(.*)?/, \'$3\')\r\n                }\r\n              });\r\n            });\r\n            break;\r\n          case "smart":\r\n          case "smartadserver":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              // we create a new adUnit for every smart tuple\r\n              adUnits.push({\r\n                bids: [{\r\n                  bidder: "smart",\r\n                  params: {\r\n                    formatId: placementId.split("-")[2],\r\n                    pageId:   placementId.split("-")[1],\r\n                    siteId:   placementId.split("-")[0]\r\n                  }\r\n                }],\r\n                code: "ADV" + window.hbParams.tag,\r\n                mediaTypes: {\r\n                  banner: {\r\n                    sizes: smartFloorFilterSize(placementId.split("-")[2], sizes)\r\n                  }\r\n                }\r\n              });\r\n              /*\r\n              adUnits[0].bids.push({\r\n                bidder: "smart",\r\n                params: {\r\n                  formatId: placementId.split("-")[2],\r\n                  pageId:   placementId.split("-")[1],\r\n                  siteId:   placementId.split("-")[0]\r\n                }\r\n              });\r\n              */\r\n            });\r\n            break;\r\n          case "teads":\r\n            placementIds = bidder.split(":")[1].split(",");\r\n\r\n            placementIds.forEach(function(placementId) {\r\n              adUnits[0].bids.push({\r\n                bidder: bidderName,\r\n                params: {\r\n                  pageId:      placementId.split("-")[0],\r\n                  placementId: placementId.split("-")[1]\r\n                }\r\n              });\r\n            });\r\n            break;\r\n        }\r\n      }\r\n    });\r\n\r\n    ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] adUnits", JSON.stringify(adUnits));\r\n    \r\n    /*\r\n    if (isRivrTest) {\r\n      window.pbjs.enableAnalytics({\r\n        provider: "rivr",\r\n        options: {\r\n          clientID: window.RIVR_CLIENT_ID,\r\n          authToken: window.RIVR_CLIENT_AUTH_TOKEN,\r\n          siteCategories: window.RIVR_SITE_CATEGORIES,\r\n          bannersIds: window.RIVR_BANNER_IDS\r\n        }\r\n      });\r\n    }\r\n    */\r\n    /*\r\n    pbjs.enableAnalytics({\r\n      provider: "rubicon",\r\n        options: {\r\n          accountId: 10677,\r\n          endpoint: "https://prebid-a.rubiconproject.com/event",\r\n          samplingFactor: 100\r\n        }\r\n    });\r\n    */\r\n  });\r\n  \r\n  window.pbjs.que.push(function() {\r\n    window.pbjs.bidderSettings = {\r\n      smart: {\r\n        bidCpmAdjustment : function(bidCpm, bid) {\r\n          return bid.netRevenue ? bidCpm : (bid.dealId ? bidCpm * 0.925 : bidCpm * 0.9);\r\n        }\r\n      }\r\n    };\r\n  });\r\n\r\n  window.pbjs.que.push(function() {\r\n    window.pbjs.onEvent("auctionInit", function(auction) {\r\n      // ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] EVENT auctionInit:", JSON.stringify(arguments));\r\n    });\r\n    \r\n    window.pbjs.onEvent("auctionEnd", function(auction) {\r\n      // ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] EVENT auctionEnd:", JSON.stringify(arguments));\r\n    });\r\n    \r\n    window.pbjs.onEvent("bidderDone", function() {\r\n      // ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] EVENT bidderDone:", JSON.stringify(arguments));\r\n    });\r\n\r\n    window.pbjs.onEvent("bidRequested", function(bidRequest) {\r\n      // ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] EVENT bidRequested:", JSON.stringify(arguments));\r\n    });\r\n\r\n    window.pbjs.onEvent("bidResponse", function(bid) {\r\n      // ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] EVENT bidResponse:", JSON.stringify(arguments));\r\n\r\n      try {\r\n        if (ADV_DEBUG && bid.dealId) {\r\n          postLog("deal:" + bid.dealId + ":" + JSON.stringify(bid));\r\n        }\r\n      } catch(e) {}\r\n    });\r\n\r\n    window.pbjs.onEvent("bidTimeout", function(bids) {\r\n      ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] EVENT bidTimeout:", JSON.stringify(arguments));\r\n\r\n      bids.forEach(function(bid) {\r\n        ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] " + bid.bidder + " timeout");\r\n        \r\n        if (typeof window.hbParams.timeoutTrackers !== "undefined" && typeof window.hbParams.timeoutTrackers[bid.bidder] !== "undefined") {\r\n          (new Image).src = window.hbParams.timeoutTrackers[bid.bidder];\r\n        }\r\n      });\r\n    });\r\n    \r\n    window.pbjs.onEvent("bidWon", function(bid) {\r\n      // ADV_DEBUG && console.log("[ADV-HB][" + window.hbParams.tag + "] EVENT bidWon:", JSON.stringify(bid));\r\n    });\r\n  });\r\n\r\n  /*\r\n  if (isRivrTest) {\r\n    setTimeout(function() {\r\n      window.pbjs.que.push(function() {\r\n        window.pbjs.addAdUnits(adUnits);\r\n        \r\n        window.pbjs.requestBids({\r\n          bidsBackHandler: bidsBackHandler\r\n        });\r\n      });\r\n    }, window.rivraddon.yieldOptimiser.timeout);\r\n  } else {\r\n  */\r\n    window.pbjs.que.push(function() {\r\n      window.pbjs.addAdUnits(adUnits);\r\n\r\n      window.pbjs.requestBids({\r\n        bidsBackHandler: bidsBackHandler\r\n      });\r\n    });\r\n  /*\r\n  }\r\n  */\r\n})();\r\n\r\n// SUPER TRY/CATCH\r\n} catch(e) {\r\n  adv_catch(e);\r\n}\r\n// SUPER TRY/CATCH\r\n\r\n// IE < 10\r\n}\r\n// IE < 10'};
document.write("<script>var adnext_rich = adnext_rich2;</scr"+"ipt><script src='//ads.adverline.com/richmedias/tools/adnext_iframe.js?v2.1'></scr"+"ipt>");if (typeof adDelivered != 'undefined') {adDelivered++;} else {adDelivered = 1;} 